datasource db {
  provider = "postgresql" // or your database provider
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id        Int          @id @default(autoincrement())
  username  String       @unique
  firstName String
  lastName  String
  email     String       @unique
  birthday  DateTime
  password  String
  role      String
  reviews   Review[]
  watchlist Watchlist?   @relation(name: "UserWatchlist")
}

model Review {
  id         Int      @id @default(autoincrement())
  comment    String
  rating     Int
  reviewerId Int
  reviewer   User     @relation(fields: [reviewerId], references: [id], map: "FK_Review_User")
  filmId     Int
  film       Film     @relation(fields: [filmId], references: [id], map: "FK_Review_Film")
}

model Watchlist {
  id           Int             @id @default(autoincrement())
  userId       Int             @unique
  user         User            @relation(fields: [userId], references: [id], map: "FK_Watchlist_User", name: "UserWatchlist")
  films        FilmWatchlist[]
  creationDate DateTime        @default(now())
}

model Film {
  id          Int              @id @default(autoincrement())
  title       String
  genre       String
  description String
  releaseDate DateTime
  rating      Float
  reviews     Review[]
  watchlists  FilmWatchlist[]
}

model FilmWatchlist {
  filmId      Int
  watchlistId Int

  film      Film      @relation(fields: [filmId], references: [id])
  watchlist Watchlist @relation(fields: [watchlistId], references: [id])

  @@id([filmId, watchlistId])
}